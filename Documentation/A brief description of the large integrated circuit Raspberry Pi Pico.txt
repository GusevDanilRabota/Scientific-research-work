ОПИСАНИЕ

Raspberry Pi Pico - это плата микроконтроллера, основанная на микросхеме микроконтроллера Raspberry Pi RP2040.
Основные блоки:
    -> микроконтроллер RP2040 с 2 Mi byte (принимается слово в 8 bit, далее B) flash memory;
    -> порт Micro-USB type B для питания и передачи данных, а также для перепрограммирования flash memory;
    -> печатная плата, имеющая 40 контактов, в стиле Dual In-Line package (двойственный встроеный пакет, далее DIP):
        -> поддерживает 26 многофункциональных устройств ввода/вывода общего назначения 
            (general-purpose input/oitput, далее GPIO) напряжением 3,3 В, 23 из которых работают только с GPIO,
            а 3 с поддержкой аналого-цифрового преобразователя (an Analog-to-Digital Converter, далее ADC);
        -> может монтироваться на поверхности в виде модуля;
    -> трехконтактный порт отладки последовательного подключения (Serial Wire Debug, далее SWD);
    -> питание от Micro-USB, внешних источников питания или батарей;
    -> двухядерный процессор Cortex M0+ с частотой до 133* МГц;
    -> встроеный контур фазовой автоподстройки частоты (Phase-Locked Loop, далее PLL);
    -> высокопроизводительная многобанковая статическая оперативная память (Static Random Access Memory, далее SRAM), умкостью 264 KiB;
    -> внешняя flash memory Quad-SPI с функцией выполнения на месте (eXecute In Place, далее XIP) и встроеной cache memory 16 KiB;
    -> встроеный USB 1.1;
    -> 30 многофункциональных устройств ввода/вывода общего назначения, четыре с поддержкой ADC;
    -> 12 разрядный ADC со скоростью 500 Ki bit/с;
    -> переферийные устройства:
        -> два универсальных асинхронных приёмопередатчиков (a Universal Asynchronous Receiver-Transmitter, далее UART);
        -> два межинтегральные схемы (Inter-Integrated Circuit, далее I2C);
        -> два SPI;
        -> 16 каналов широтно-импульсной модуляции (Pulse-Width Modulation, далее PWM);
    -> два программируемых блока ввода/вывода (далее PIO), всего 8 конечных автоматов гибкий, программируемый 
        пользователем высокоскоростной ввод/вывод;
Pico обеспечивает минимальную внешнюю схему для поддержки чипа RP2040: flash memory (Winbond W25Q16JV), кристалл, блоки питания и развязки,
    а также разъем USB.
Большинство выводов микроконтроллера RP2040 подведены к выводам пользовательского ввода/вывода на левом и правом краях платы.
Четыре ввода/вывода RP2040 используются для внутренних функций - управления светодиодом, управления питанием от бортового источника питания
    с коммутацией режимов - импульсный источник питания с переключением режимов (a Switched-Mode Power Supply, далее SMPS) - и измерения
    напряжения в системе.
Pico использует встроенный SMPS с понижающим коэффициентом усиления, который способен генерировать необходимые 3,3 вольта (для питания RP2040 
    и внешних схем) в широком диапазоне входных напряжений от 1,8 до 5,5 В.
Это обеспечивает значительную гибкость при питании устройства от различных источников, таких как один литий-ионный элемент или
    3 последовательно соединенных элемента типа АА.
Зарядные устройства также могут быть очень легко интегрированы с Pico powerchain.
Перепрограммирование Pico Flash можно выполнить с помощью USB (просто перетащите файл на Pico, который отображается как устройство массового
    хранения данных), или SWD может сбросить систему, загрузить и запустить код без каких-либо нажатий кнопок.
Порт SWD также можно использовать для интерактивной отладки кода, запущенного на RP2040.

РАСПИНОВКА

Распиновка Pico была разработана таким образом, чтобы напрямую отображать как можно больше функций GPIO RP2040 и внутренних схем,
    насколько это возможно, а также обеспечивать подходящее количество контактов заземления для уменьшения электромагнитных
    помех и перекрестных помех сигнала.
Несколько выводов GPIO RP2040 используются для внутренних функций платы, это:
    -> GPIO29 - IP, используемый в режиме ADC3 для измерения VSYS/3;
    -> GPIO25 - операционная система подключёная к пользовательскому светодиоду;
    -> GPIO24 - IP VBUS sense - высокий, если присутствует VBUS, в притивном случае низкий;
    -> GPIO23 - OP управляет встроенным выводом SPMS для энергосбережения;
Помимо контактов GPIO и заземления, на основном 40 контактном интерфейсе есть еще 7 контактов:
    -> PIN40 - VBUS;
    -> PIN39 - VSYS;
    -> PIN37 - 3V3_EN;
    -> PIN36 - 3V3;
    -> PIN35 - ADC_VREF;
    -> PIN33 - AGND;
    -> PIN30 - RUN.
VBUS - это входное напряжение Micro-USB, подключенное к контакту 1 порта Micro-USB. Номинально это 5 В (или 0 В, если USB не
    подключен или не питается).
VSYS - это основное входное напряжение системы, которое может варьироваться в допустимом диапазоне от 1,8 В до 5,5 В и используется.
SMPS для генерации напряжения 3,3 В для RP2040 и его GPIO.
3V3_EN подключается к встроенному контакту включения SMPS и подключается к VSYS через резистор 100 КОМ. Чтобы отключить напряжение 3,3 В
    (которое также отключает питание RP2040), закоротите этот вывод до минимума.
3V3 - это основной источник питания напряжением 3,3 В для RP2040 и его ввода-вывода, генерируемый встроенным SMPS. Этот вывод можно использовать
    для питания внешней схемы (максимальный выходной ток будет зависеть от нагрузки RP2040 и напряжения VSYS, рекомендуется поддерживать
    нагрузку на этот вывод менее 300 мА).
ADC_VREF - это напряжение источника питания АЦП (и опорное), которое генерируется на Pico путем фильтрации напряжения питания 3,3 В. Этот
    вывод можно использовать с внешним эталоном, если требуется более высокая производительность ADC.
AGND является эталоном заземления для GPIO26-29, под этими сигналами проходит отдельная аналоговая плоскость заземления, заканчивающаяся
    на этом выводе. Если АЦП не используется или производительность АЦП не критична, этот вывод можно подключить к цифровому заземлению.
RUN - это вывод включения RP2040, и он имеет внутренний (встроенный в микросхему) подтягивающий резистор на 3,3 В с напряжением около ~ 50 Ком.
    Для сброса RP2040 закоротите этот вывод до минимума.
Есть также 6 тестовых точек (TP1-TP6), к которым при необходимости можно получить доступ, например, при использовании в качестве модуля для
    поверхностного монтажа:
    -> TP1 - заземление (замкнутое заземление для дифференциальных сигналов USB);
    -> TP2 - USB DM;
    -> TP3 - USB OF;
    -> TP4 - вывод GPIO23 / SMPS PS (не использовать);
    -> TP5 - GPIO25 / LED (не рекомендуется использовать);
    -> TP6 - BOOTSEL;
TP1, TP2 и TP3 можно использовать для доступа к сигналам USB вместо использования порта Micro-USB.
Обратите внимание, что TP4 не предназначен для внешнего использования, а TP5 использовать не рекомендуется, поскольку он будет колебаться
    только от 0 В до прямого напряжения на светодиоде (и, следовательно, может использоваться в качестве выходного сигнала только с 
    особой осторожностью).
TP6 можно использовать для перевода системы в режим программирования USB-накопителя (путем короткого замыкания при включении питания).


УСДЛВИЯ ЭКСПЛУАТАЦИИ

Максимальная рабочая температура 85 ℃ включая самонагрев.
Минимальная рабочая температура -20 ℃.
VBUS от 4,5 до 5,5 В.
VSYS min 1,8 В.
VSYS max 5,5 В.



ИНФОРМАЦИЯ О ПРИЛОЖЕНИЯХ

ПРОГРАММИРОВАНИЕ FLASH Memory

Встроенную 2 MiB flash memory QSPI можно повторно запрограммировать либо с помощью порта отладки последовательного подключения, либо
    с помощью специального USB в режиме устройства массового хранения данных.
Самый простой способ перепрограммировать flash memory Pico - это использовать режим USB. Для этого отключите питание платы, затем удерживайте
    кнопку BOOTSEL нажатой во время включения платы (например, удерживайте кнопку BOOTSEL нажатой при подключении USB). Затем Pico будет
    отображаться как USB-накопитель. Перетаскивание специального файла '.uf2' на диск приведет к записи этого файла на flash memory
    и перезапуску Pico.
Загрузочный код USB хранится в ПЗУ RP2040, поэтому его невозможно случайно перезаписать.
Работа с портом SWD описана в файле getting-started-with-pico.pdf.

ВВОД/ВЫВОД ОБЩЕГО НАЗНАЧЕНИЯ

GPIO Raspberry Pi Pico питается от встроенной шины 3,3 В и имеет фиксированное напряжение 3,3 В.
Pico предоставляет доступ к 26 из 30 возможных выводов GPIO RP2040, направляя их непосредственно к выводам заголовка Pico. GPIO0- GPIO22
    являются только цифровыми, а GPIO 26-28 могут использоваться либо как цифровые GPIO, либо как входы АЦП (выбираются программным 
    обеспечением).
GPIO26-29 с поддержкой АЦП имеют внутренний обратный диод на шине VDDIO (3V3), и поэтому входное напряжение не должно превышать VDDIO плюс
    около 0,3 В. Кроме того, если RP2040 отключен от сети, подача напряжения на эти выводы GPIO приведет к "утечке" через диод в шину VDDIO.
Обычные цифровые выводы GPIO 0-25 (а также выводы отладки) не имеют этого ограничения, и поэтому к этим выводам можно безопасно подавать 
    напряжение, когда RP2040 отключен от питания.

ИСППОЛЬЗОВАНИЕ ADC

ADC RP2040 не имеет встроенного эталона и поэтому использует в качестве эталона свой собственный источник питания. На Pico вывод ADC_AVDD
    (источник питания ADC) генерируется из SMPS 3,3 В с использованием R-C фильтра (201 Ом на 2,2 мкФ). Это простое решение, но имеет
    следующие недостатки:
        -> Мы полагаемся на точность выходного сигнала SMPS 3,3 В, которая невелика;
        -> Мы можем выполнять только определенную фильтрацию, и поэтому ADC_AVDD будет несколько зашумленным;
        -> ADC потребляет ток (около 150 мкА, если диод измерения температуры отключен, но он варьируется от микросхемы к микросхеме) и, 
            следовательно, будет присуще смещение примерно в 150 мкА * 200 = ~ 30 мВ. Существует небольшая разница в токе, потребляемом
            при выборке ADC (~ 20 мкА), так что смещение также будет меняться в зависимости от выборки, а также от рабочей температуры.
Изменение сопротивления между ADC_VREF и выводом 3V3 может уменьшить смещение за счет увеличения шума - что может быть нормально, особенно
    если вариант использования может поддерживать усреднение по нескольким выборкам.
Повышенное значение вывода режима SMPS (GPIO23) для перевода источника питания в режим PWM может значительно уменьшить характерные пульсации
    SMPS при малой нагрузке и, следовательно, пульсации на источнике питания ADC.
Это действительно снижает энергоэффективность платы при небольшой нагрузке, таким образом, режим PFM с низким энергопотреблением можно повторно
    включать между нечастыми измерениями ADC, еще раз понизив GPIO23.
Смещение АЦП можно уменьшить, подключив второй канал ADC к земле и используя это нулевое измерение как приближение к смещению.
Для значительного повышения производительности ADC внешний опорный шунт 3,0 В, такой как LM4040, может быть подключен от вывода ADC_VREF к
    заземлению. Обратите внимание, что при выполнении этого диапазон ADC ограничен сигналами 0-3,0 В (а не 0-3,3 В), и опорный шунт будет
    пропускать постоянный ток через фильтрующий резистор 200R (3,3 В-3,0 В) / 200 = ~ 1,5 мА.
Обратите внимание, что резистор 1R на Pico (R9) предназначен для помощи в шунтирующих опорах, которые в противном случае стали бы нестабильными
    при прямом подключении к 2,2 мкФ.
Это также гарантирует небольшую фильтрацию даже в том случае, если 3,3 В и ADC_VREF замкнуты вместе (что вполне допустимо, если вы не
    заботитесь о шуме и хотите уменьшить присущее ему смещение).
Наконец, R7 представляет собой физически большой резистор 1608 metric (0603), поэтому его можно относительно легко удалить, если
    пользователь хочет изолировать ADC_VREF и выполнять свои собственные действия с напряжением ADC, например, запитывая его от совершенно
    отдельного напряжения (например, 2,5 В).
Обратите внимание, что ADC на RP2040 настроен только на 3,0 / 3,3 В, но должен работать примерно до 2 В.

POWERCHAIN

Raspberry Pi Pico был разработан с простой, но гибкой архитектурой источника питания и может легко питаться от других источников, таких как
    батареи или внешние источники питания. Интеграция Pico с внешними цепями зарядки также проста.
VBUS - это вход 5 В от порта micro-USB, который подается через диод Шоттки для генерации VSYS.
Подключение VBUS к диоду VSYS (D1) повышает гибкость, позволяя подключать к VSYS различные источники питания.
VSYS является основным системным "входным напряжением" и питает RT6150 buck-boost SMPS, который генерирует фиксированное выходное напряжение
    3,3 В для устройства RP2040 и его ввода/вывода (и может использоваться для питания внешних схем).
VSYS отфильтровывается по R-C и делится на 3 (на R5, R6 и C3 на схеме Pico) и может контролироваться по каналу 3 АЦП.
Это может быть использовано, например, в качестве грубого монитора напряжения батареи.
SMPS с понижающим коэффициентом усиления, как следует из его названия, может плавно переключаться с понижающего на повышающий режим и,
    следовательно, может поддерживать выходное напряжение 3,3 В при широком диапазоне входных напряжений, от ~ 1,8 В до 5,5 В,
    что обеспечивает большую гибкость в выборе источника питания.
GPIO24 отслеживает наличие VBUS, в то время как R10 и R1 отключают VBUS, чтобы убедиться, что он равен 0V, если VBUS нет .
GPIO23 управляет выводом RT6150 PS (энергосбережение).
Когда мощность низкая (по умолчанию для Pico), регулятор находится в режиме
импульсной частотной модуляции, который при небольших нагрузках позволяет значительно экономить электроэнергию, лишь изредка включая
переключающие МОП-транзисторы для поддержания выходного конденсатора в тонусе. Установка высокого значения PS переводит регулятор в режим
широтно-импульсной модуляции (PWM). Режим PWM заставляет SMPS переключаться непрерывно., что значительно снижает пульсации на выходе при
небольших нагрузках (что может быть хорошо для некоторых случаев использования), но за счет гораздо худшей эффективности. Обратите внимание,
что при большой нагрузке переключатель будет находиться в режиме PWM независимо от состояния вывода PS.
Вывод SMPS EN подключается к VSYS с помощью резистора 100 КОМ и становится доступным на выводе 37 Pico.
Замыкание этого контакта на землю отключит коммутатор и переведет его в режим низкого энергопотребления.

ВКЛЮЧЕНИЕ ПИКО 

Самый простой способ питания Pico - подключить micro-USB, который будет питать VSYS (и, следовательно, систему) от напряжения VBUS USB 5 В
    через D1 (таким образом, VSYS становится VBUS за вычетом падения диода Шоттки).
Если USB-порт является только источник питания, VSYS и VBUS можно безопасно замкнуть коротким замыканием вместе, чтобы исключить падение
    напряжения на диоде Шоттки (что повышает эффективность и уменьшает пульсации на VSYS).
Если порт USB не будет использоваться, можно безопасно включить Pico, подключив VSYS к предпочтительному источнику питания (в диапазоне ~ 1,8 -5,5 В).
Самый простой способ безопасно подключить второй источник питания к Pico - это подключить его к VSYS через другой диод Шоттки.
Это приведет к "ИЛИ" двум напряжениям, позволяя более высокому из них - либо внешнему напряжению, либо VBUS - питать VSYS, при этом диоды
    предотвращают обратное включение одного источника питания в другой.
Например, один литий-ионный элемент * (напряжение элемента ~ 3,0 В - 4,2 В) будет работать хорошо, как и элементы серии 3xAA (от ~ 3,0 В до ~ 4,8 В)
    и любой другой фиксированный источник питания в диапазоне от ~ 2,3 В до 5,5 В.
Недостатком этого подхода является то, что второй источник питания будет испытывать падение напряжения диода так же, как и VBUS , и это может быть 
    нежелательно с точки зрения эффективности или если источник уже близок к нижнему диапазону входного напряжения, допустимого для RT6150.
Улучшенный способ питания от второго источника - использование P-канального MOSFET (P-FET) для замены диода Шоттки.
Здесь вентиль полевого транзистора управляется VBUS и отключает вторичный источник, когда присутствует VBUS.
P-полевой транзистор следует выбирать таким, чтобы он имел низкое сопротивление и, следовательно, решал проблемы с эффективностью и падением напряжения
    с помощью решения, основанного только на диоде.
Обратите внимание, что Vt (пороговое напряжение) P-FET должно быть выбрано значительно ниже минимального внешнего входного напряжения,
чтобы убедиться, что P-FET включается быстро и с низким сопротивлением.
Когда входная шина VBUS отключена, P-FET отключается начинайте включаться до тех пор, пока VBUS не опустится ниже значения Vt P-FETS, тем временем может
    начать работать основной диод P-FET (в зависимости от того, меньше ли значение Vt, чем падение диода). Для входов с низким минимальным входным напряжением или
    если ожидается, что P-FET полевой транзистор будет изменяться медленно (например если к VBUS добавляется какая-либо емкость), рекомендуется
    использовать вторичный диод Шоттки поперек P-FET (в том же направлении, что и основной диод).
Это уменьшит падение напряжения на P-FET полевом диоде.
Примером подходящего P-MOSFET для большинства ситуаций являются диоды DMG2305UX, которые имеют максимальную мощность 0,9 В и Ron 100 Миллиом (при напряжении 2,5 В Vgs).

USB

RP2040 имеет встроенный интерфейс USB1.1 и контроллер, который может использоваться как в режиме устройства, так и хоста.
Pico добавляет два необходимых внешних резистора по 27 Ом и подключает этот интерфейс к стандартному порту micro-USB.
Порт USB можно использовать для доступа к загрузчику USB (режим BOOTSEL), хранящемуся в загрузочном ПЗУ RP2040.
Он также может использоваться пользовательским кодом для доступа к внешнему USB-устройству или хосту.

ОТЛАДКА

Raspberry Pi Pico подключает интерфейс последовательной отладки RP2040 (SWD) к 3-контактному отладочному разъему на нижнем краю платы.









